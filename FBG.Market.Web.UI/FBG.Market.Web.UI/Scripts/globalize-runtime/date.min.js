!function(e,u){"function"==typeof define&&define.amd?define(["../globalize-runtime","./number"],u):"object"==typeof exports?module.exports=u(require("../globalize-runtime"),require("./number")):u(e.Globalize)}(this,function(e){var u=e._createErrorUnsupportedFeature,a=e._regexpEscape,r=e._runtimeKey,t=e._stringPad,n=e._validateParameterPresence,s=e._validateParameterType,c=e._validateParameterTypeString,o=function(e,u){s(e,u,void 0===e||e instanceof Date,"Date")},i=function(e,u){return(e.getDay()-u+7)%7},D=function(e,u){switch(e=new Date(e.getTime()),u){case"year":e.setMonth(0);case"month":e.setDate(1);case"day":e.setHours(0);case"hour":e.setMinutes(0);case"minute":e.setSeconds(0);case"second":e.setMilliseconds(0)}return e},l=function(e){return Math.floor((u=D(e,"year"),(e.getTime()-u.getTime())/864e5));var u},f=/([a-z])\1*|'([^']|'')+'|''|./gi,m=function(e,u,a,r){var n,s=e.getTimezoneOffset();return n=Math.abs(s),r=r||{1:function(e){return t(e,1)},2:function(e){return t(e,2)}},u.split(";")[s>0?1:0].replace(":",a).replace(/HH?/,function(e){return r[e.length](Math.floor(n/60))}).replace(/mm/,function(){return r[2](n%60)})},F=["sun","mon","tue","wed","thu","fri","sat"],g=function(e,u,a){var r=a.timeSeparator;return a.pattern.replace(f,function(t){var n,s=t.charAt(0),c=t.length;switch("j"===s&&(s=a.preferredTime),"Z"===s&&(c<4?(s="x",c=4):c<5?(s="O",c=4):(s="X",c=5)),s){case"G":n=a.eras[e.getFullYear()<0?0:1];break;case"y":n=e.getFullYear(),2===c&&(n=+(n=String(n)).substr(n.length-2));break;case"Y":(n=new Date(e.getTime())).setDate(n.getDate()+7-i(e,a.firstDay)-a.firstDay-a.minDays),n=n.getFullYear(),2===c&&(n=+(n=String(n)).substr(n.length-2));break;case"Q":case"q":n=Math.ceil((e.getMonth()+1)/3),c>2&&(n=a.quarters[s][c][n]);break;case"M":case"L":n=e.getMonth()+1,c>2&&(n=a.months[s][c][n]);break;case"w":n=i(D(e,"year"),a.firstDay),n=Math.ceil((l(e)+n)/7)-(7-n>=a.minDays?0:1);break;case"W":n=i(D(e,"month"),a.firstDay),n=Math.ceil((e.getDate()+n)/7)-(7-n>=a.minDays?0:1);break;case"d":n=e.getDate();break;case"D":n=l(e)+1;break;case"F":n=Math.floor(e.getDate()/7)+1;break;case"e":case"c":if(c<=2){n=i(e,a.firstDay)+1;break}case"E":n=F[e.getDay()],n=a.days[s][c][n];break;case"a":n=a.dayPeriods[e.getHours()<12?"am":"pm"];break;case"h":n=e.getHours()%12||12;break;case"H":n=e.getHours();break;case"K":n=e.getHours()%12;break;case"k":n=e.getHours()||24;break;case"m":n=e.getMinutes();break;case"s":n=e.getSeconds();break;case"S":n=Math.round(e.getMilliseconds()*Math.pow(10,c-3));break;case"A":n=Math.round(function(e){return e-D(e,"day")}(e)*Math.pow(10,c-3));break;case"z":case"O":0===e.getTimezoneOffset()?n=a.gmtZeroFormat:(n=m(e,c<4?"+H;-H":a.tzLongHourFormat,r,u),n=a.gmtFormat.replace(/\{0\}/,n));break;case"X":if(0===e.getTimezoneOffset()){n="Z";break}case"x":n=m(e,n=1===c?"+HH;-HH":c%2?"+HH:mm;-HH:mm":"+HHmm;-HHmm",":");break;case":":n=r;break;case"'":t=t.replace(/''/,"'"),c>2&&(t=t.slice(1,-1)),n=t;break;default:n=t}return"number"==typeof n&&(n=u[c](n)),n})},p=function(e,u){var a=e.getDate();e.setDate(1),e.setMonth(u),function(e,u){var a=new Date(e.getFullYear(),e.getMonth()+1,0).getDate();e.setDate(u<1?1:u<a?u:a)}(e,a)},b=function(e,u,a){return e<u||e>a},h=function(e,a,r){var t,n,s,c,o,i,l,f,m,F=new Date,g=[];if(!a.length)return null;if(!a.every(function(e){var a,D,m;if("literal"===e.type)return!0;switch(a=e.type.charAt(0),m=e.type.length,"j"===a&&(a=r.preferredTimeData),a){case"G":g.push(0),o=+e.value;break;case"y":if(D=e.value,2===m){if(b(D,0,99))return!1;(D+=100*Math.floor(F.getFullYear()/100))>F.getFullYear()+20&&(D-=100)}F.setFullYear(D),g.push(0);break;case"Y":throw u({feature:"year pattern `"+a+"`"});case"Q":case"q":break;case"M":case"L":if(D=m<=2?e.value:+e.value,b(D,1,12))return!1;c=D,g.push(1);break;case"w":case"W":break;case"d":n=e.value,g.push(2);break;case"D":s=e.value,g.push(2);break;case"F":break;case"e":case"c":case"E":break;case"a":t=e.value;break;case"h":if(D=e.value,b(D,1,12))return!1;i=l=!0,F.setHours(12===D?0:D),g.push(3);break;case"K":if(D=e.value,b(D,0,11))return!1;i=l=!0,F.setHours(D),g.push(3);break;case"k":if(D=e.value,b(D,1,24))return!1;i=!0,F.setHours(24===D?0:D),g.push(3);break;case"H":if(D=e.value,b(D,0,23))return!1;i=!0,F.setHours(D),g.push(3);break;case"m":if(D=e.value,b(D,0,59))return!1;F.setMinutes(D),g.push(4);break;case"s":if(D=e.value,b(D,0,59))return!1;F.setSeconds(D),g.push(5);break;case"A":F.setHours(0),F.setMinutes(0),F.setSeconds(0);case"S":D=Math.round(e.value*Math.pow(10,3-m)),F.setMilliseconds(D),g.push(6);break;case"Z":case"z":case"O":case"X":case"x":f=e.value-F.getTimezoneOffset()}return!0}))return null;if(i&&!(!t^l))return null;if(0===o&&F.setFullYear(-1*F.getFullYear()+1),void 0!==c&&p(F,c-1),void 0!==n){if(b(n,1,function(e){return new Date(e.getFullYear(),e.getMonth()+1,0).getDate()}(F)))return null;F.setDate(n)}else if(void 0!==s){if(b(s,1,(m=F.getFullYear(),1===new Date(m,1,29).getMonth()?366:365)))return null;F.setMonth(0),F.setDate(s)}return l&&"pm"===t&&F.setHours(F.getHours()+12),f&&F.setMinutes(F.getMinutes()+f),g=Math.max.apply(null,g),F=D(F,["year","month","day","hour","minute","second","milliseconds"][g])},d=/[0-9\xB2\xB3\xB9\xBC-\xBE\u0660-\u0669\u06F0-\u06F9\u07C0-\u07C9\u0966-\u096F\u09E6-\u09EF\u09F4-\u09F9\u0A66-\u0A6F\u0AE6-\u0AEF\u0B66-\u0B6F\u0B72-\u0B77\u0BE6-\u0BF2\u0C66-\u0C6F\u0C78-\u0C7E\u0CE6-\u0CEF\u0D66-\u0D75\u0DE6-\u0DEF\u0E50-\u0E59\u0ED0-\u0ED9\u0F20-\u0F33\u1040-\u1049\u1090-\u1099\u1369-\u137C\u16EE-\u16F0\u17E0-\u17E9\u17F0-\u17F9\u1810-\u1819\u1946-\u194F\u19D0-\u19DA\u1A80-\u1A89\u1A90-\u1A99\u1B50-\u1B59\u1BB0-\u1BB9\u1C40-\u1C49\u1C50-\u1C59\u2070\u2074-\u2079\u2080-\u2089\u2150-\u2182\u2185-\u2189\u2460-\u249B\u24EA-\u24FF\u2776-\u2793\u2CFD\u3007\u3021-\u3029\u3038-\u303A\u3192-\u3195\u3220-\u3229\u3248-\u324F\u3251-\u325F\u3280-\u3289\u32B1-\u32BF\uA620-\uA629\uA6E6-\uA6EF\uA830-\uA835\uA8D0-\uA8D9\uA900-\uA909\uA9D0-\uA9D9\uA9F0-\uA9F9\uAA50-\uAA59\uABF0-\uABF9\uFF10-\uFF19]|\uD800[\uDD07-\uDD33\uDD40-\uDD78\uDD8A\uDD8B\uDEE1-\uDEFB\uDF20-\uDF23\uDF41\uDF4A\uDFD1-\uDFD5]|\uD801[\uDCA0-\uDCA9]|\uD802[\uDC58-\uDC5F\uDC79-\uDC7F\uDCA7-\uDCAF\uDD16-\uDD1B\uDE40-\uDE47\uDE7D\uDE7E\uDE9D-\uDE9F\uDEEB-\uDEEF\uDF58-\uDF5F\uDF78-\uDF7F\uDFA9-\uDFAF]|\uD803[\uDE60-\uDE7E]|\uD804[\uDC52-\uDC6F\uDCF0-\uDCF9\uDD36-\uDD3F\uDDD0-\uDDD9\uDDE1-\uDDF4\uDEF0-\uDEF9]|\uD805[\uDCD0-\uDCD9\uDE50-\uDE59\uDEC0-\uDEC9]|\uD806[\uDCE0-\uDCF2]|\uD809[\uDC00-\uDC6E]|\uD81A[\uDE60-\uDE69\uDF50-\uDF59\uDF5B-\uDF61]|\uD834[\uDF60-\uDF71]|\uD835[\uDFCE-\uDFFF]|\uD83A[\uDCC7-\uDCCF]|\uD83C[\uDD00-\uDD0C]/,E=function(e,u,r){var t,n=r.timeSeparator,s=[],c=["abbreviated","wide","narrow"];return t=r.pattern.match(f).every(function(t){var o,i,D,l,f={};function m(u,a){var r=e.match(u);return a=a||function(e){return+e},!!r&&(r.length<8?f.value=60*(r[1]?-a(r[1]):a(r[4])):f.value=60*(r[1]?-a(r[1]):a(r[7]))+(r[1]?-a(r[4]):a(r[10])),!0)}function F(e,u,a){var r;return u||(u="{0}"),r=e.replace("+","\\+").replace(/HH|mm/g,"(("+d.source+")("+d.source+"))").replace(/H|m/g,"(("+d.source+")("+d.source+")?)"),a&&(r=r.replace(/:/g,a)),r=r.split(";").map(function(e){return u.replace("{0}",e)}).join("|"),new RegExp(r)}function g(){if(1===i)return D=!0,l=d}function p(){if(1===i)return D=!0,l=new RegExp("("+d.source+")("+d.source+")?")}function b(){if(2===i)return D=!0,l=new RegExp("("+d.source+")("+d.source+")")}function h(u){var a,t=r[u.join("/")];for(a in t)if(new RegExp("^"+t[a]).test(e))return f.value=a,l=new RegExp(t[a]);return null}switch(f.type=t,o=t.charAt(0),i=t.length,"Z"===o&&(i<4?(o="x",i=4):i<5?(o="O",i=4):(o="X",i=5)),o){case"G":h(["gregorian/eras",i<=3?"eraAbbr":4===i?"eraNames":"eraNarrow"]);break;case"y":case"Y":D=!0,l=1===i?new RegExp("("+d.source+")+"):2===i?new RegExp("("+d.source+")("+d.source+")"):new RegExp("("+d.source+"){"+i+",}");break;case"Q":case"q":g()||b()||h(["gregorian/quarters","Q"===o?"format":"stand-alone",c[i-3]]);break;case"M":case"L":p()||b()||h(["gregorian/months","M"===o?"format":"stand-alone",c[i-3]]);break;case"D":i<=3&&(D=!0,l=new RegExp("("+d.source+"){"+i+",3}"));break;case"W":case"F":g();break;case"e":case"c":if(i<=2){g()||b();break}case"E":6===i?h(["gregorian/days",["c"===o?"stand-alone":"format"],"short"])||h(["gregorian/days",["c"===o?"stand-alone":"format"],"abbreviated"]):h(["gregorian/days",["c"===o?"stand-alone":"format"],c[i<3?0:i-3]]);break;case"a":h(["gregorian/dayPeriods/format/wide"]);break;case"w":case"d":case"h":case"H":case"K":case"k":case"j":case"m":case"s":p()||b();break;case"S":D=!0,l=new RegExp("("+d.source+"){"+i+"}");break;case"A":D=!0,l=new RegExp("("+d.source+"){"+(i+5)+"}");break;case"z":case"O":if(e===r["timeZoneNames/gmtZeroFormat"])f.value=0,l=new RegExp(r["timeZoneNames/gmtZeroFormat"]);else if(!m(l=F(i<4?"+H;-H":r["timeZoneNames/hourFormat"],r["timeZoneNames/gmtFormat"],n),u))return null;break;case"X":if("Z"===e){f.value=0,l=/Z/;break}case"x":if(!m(l=F(1===i?"+HH;-HH":i%2?"+HH:mm;-HH:mm":"+HHmm;-HHmm")))return null;break;case"'":f.type="literal",t=t.replace(/''/,"'"),i>2&&(t=t.slice(1,-1)),l=new RegExp(a(t));break;default:f.type="literal",l=/./}return!!l&&(e=e.replace(new RegExp("^"+l.source),function(e){return f.lexeme=e,D&&(f.value=u(e)),""}),!!f.lexeme&&(s.push(f),!0))}),""!==e&&(t=!1),t?s:[]};return e._dateFormatterFn=function(e,u){return function(a){return n(a,"value"),o(a,"value"),g(a,e,u)}},e._dateParserFn=function(e,u,a){return function(r){var t;return n(r,"value"),c(r,"value"),t=E(r,e,a),h(0,t,u)||null}},e._dateFormat=g,e._dateParser=h,e._dateTokenizer=E,e._validateParameterTypeDate=o,e.dateFormatter=e.prototype.dateFormatter=function(u){return u=u||{skeleton:"yMd"},e[r("dateFormatter",this._locale,[u])]},e.dateParser=e.prototype.dateParser=function(u){return u=u||{skeleton:"yMd"},e[r("dateParser",this._locale,[u])]},e.formatDate=e.prototype.formatDate=function(e,u){return n(e,"value"),o(e,"value"),this.dateFormatter(u)(e)},e.parseDate=e.prototype.parseDate=function(e,u){return n(e,"value"),c(e,"value"),this.dateParser(u)(e)},e});